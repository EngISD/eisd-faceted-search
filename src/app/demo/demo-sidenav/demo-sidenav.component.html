<div class="example-container" [class.example-is-mobile]="mobileQuery.matches">
  <mat-sidenav-container class="example-sidenav-container"
                          [style.marginTop.px]="mobileQuery.matches ? 0 : 0">
    <mat-sidenav #snav [opened]="mobileQuery.matches ? 'false' : 'true'" [mode]="mobileQuery.matches ? 'over' : 'side'"
                  [fixedInViewport]="mobileQuery.matches" [fixedTopGap]="mobileQuery.matches ? 64 : 64">
      <mat-nav-list class="facet">
          <mat-expansion-panel [expanded]="i < 2" *ngFor="let category of categories; trackBy: trackByFn; let i = index">
              <mat-expansion-panel-header>
                <mat-panel-title class="noSelect">
                    <mat-icon class="catIcon" matListIcon>{{ category.icon }}</mat-icon>&nbsp;&nbsp;&nbsp;&nbsp;{{ category.id | titlecase }}
                </mat-panel-title>
              </mat-expansion-panel-header>
              <ng-template matExpansionPanelContent *ngIf="category.id != 'anno'">
                  <mat-selection-list dense [(ngModel)]="selected[category.id]" (ngModelChange)="onNgModelChange($event)" [ngModelOptions]="{standalone: true}">
                    <mat-list-option *ngFor="let checkbox of checkboxes[category.id]; trackBy: trackByFn;" [value]="checkbox.code">
                      <mat-icon matListIcon>label</mat-icon>
                      <p class="noSelect">{{ checkbox.descr }} ({{ checkbox.count }})</p>
                    </mat-list-option>
                    <button mat-raised-button class="moreButton" *ngIf="hasMore[category.id]" (click)="showMore(category.id)">Mostra di pi√π</button>
                    <button mat-raised-button class="moreButton" *ngIf="numMore[category.id] > 1" (click)="showLess(category.id)">Mostra meno</button>
                  </mat-selection-list>
              </ng-template>
              <ng-template matExpansionPanelContent *ngIf="category.id == 'anno'">
                <canvas baseChart *ngIf="barChartData[0].data.length > 0"
                    [datasets]="barChartData"
                    [labels]="barChartLabels"
                    [options]="barChartOptions"
                    [legend]="barChartLegend"
                    [colors]="barChartColors"
                    [chartType]="barChartType"
                    (chartHover)="chartHovered($event)"
                    (chartClick)="chartClicked($event)"></canvas>
              </ng-template>
            </mat-expansion-panel>
      </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content>
      <ngx-loading [show]="loading" [config]="{animationType: ngxLoadingAnimationTypes.wanderingCubes, primaryColour: primaryColour, secondaryColour: secondaryColour, backdropBorderRadius: '3px'}" [template]="customLoadingTemplate"></ngx-loading>
      <mat-paginator class="paginator-option"
                    [length]="length"
                    [pageIndex]="pageIndex"
                    [pageSize]="pageSize"
                    [pageSizeOptions]="pageSizeOptions"
                    (page)="onPageChanged($event);">
      </mat-paginator>
        <cdk-virtual-scroll-viewport itemSize="20" class="viewport">
          <div *cdkVirtualFor="let item of activePageDataChunk; let first = first;"  
               class="viewport-item mat-elevation-z2"
               [class.first] = "first"
               (click) = "openDialog(item)">
            <div class="round mat-elevation-z4">{{ item.comCodice | slice:0:3 }}</div>
            <div class="viewport-item-title">
              {{ item.comCodice }}<br>{{ item.anno }}<br>{{item.comDescrizione}}
            </div>
            <div class="viewport-item-title">{{item.comCliente}}<br>{{item.cliPartitaIva}}<br>{{item.cliTipologia}} </div>
            <div class="viewport-item-title">{{item.cdcCodice}}<br>{{item.cdcDescrizione}}<br>{{item.cdcBusinessUnit}}<br></div>
            <div class="viewport-item-title">{{item.cdcResponsabile}}<br>{{item.respCognome}} {{item.respNome}}</div>
          </div>
        </cdk-virtual-scroll-viewport>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>